# Xregex 正则库设计

## 需求
1. 具有基本的处理正则表达式能力
2. 支持utf-8编码方式的文件
3. 支持Online Parsing
    > online parsing 常用于语法高亮和大文件解析中. 其意思是输入一部分内容就匹配一部分, 有新内容输入的时候你不该重头匹配一遍 (每敲一个字符重新着色一遍太慢了), 而是做最低限度的回溯. 
4. 可能会随着开发过程变更

## 开发计划
1. 完成解析utf-8字符部分
2. 构建NFA及DFA
3. 思考扩展功能的实现方法

## 基本思路
1. 把要解析的文本和正则表达式全部读取到内存中，对它们进行utf-8解码。  
2. utf-8解码应该为一个独立且简洁的模块，可以被构造NFA的程序和文本处理程序调用。  
3. 文本被解码之后得到的每个unicode符号用整数存储。输出时将整数再转换为utf-8编码后输出。
4. 读取正则表达式语句，生成对应的树  
    - 符号 '*' 代表重复
    - 符号 '|' 代表并联
    - 中括号代表可选
    - 圆括号用于改变优先级
    - 如果需要匹配前面几个符号，在符号前'\'
5. 正则表达式树优先读取content中的内容，再读取child中的内容

## 正则表达式文法

```
S -> A
A -> AA|e   #连接
A -> [C]    #并联
C -> DE
D -> ^|e
E -> EE|char|char-char
A -> AG     #重复
G -> HI
H -> {J}
J -> num|num,|,num|num1,num2
I -> ?|e
A -> (A)    #括号
A -> A\|A
A -> .

```

## 代码风格
1. 缩进：4个空格
2. 函数名：小驼峰式
3. 普通变量名：下划线命名法
4. 复合数据结构：首字母大写+驼峰式
5. 宏：下划线命名法 + 大写

## 其他注意事项
1.
